<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    
</body>
<script>
    // var obj = new Proxy({},{
    //     get:function(target, key, receiver){
    //         console.log("aaa");
    //         return Reflect.get(target, key, receiver);
    //     },
    //     set: function(target,key,value,receiver){
    //         console.log("bbb");
    //         return Reflect.set(target,key,value,receiver)
    //     }
    // });
    // console.log(1)
    // obj.count = 1;
    // console.log(2)
    // ++obj.count;
    // console.log(3)

    // var proxy = new Proxy({},{
    //     get: function(target, property){
    //         return 32
    //     }
    // })
    // console.log(proxy.time);
    // console.log(proxy.name);
    // console.log(proxy.title);

    // var test = "a,b,c";
    // var b = test.split(',').reverse();
    // console.log(b);

    // var person = {
    //     name: "张三"
    // }
    // var proxy = new Proxy(person,{
    //     get: function(target, property){
    //         if(property in target){
    //             return target[property]
    //         }else{
    //             throw new ReferenceError("属性不存在")
    //         }
    //     }
    // });
    // proxy.name;
    // proxy.age;

//     var pipe = (function () {
//   return function (value) {
//     var funcStack = [];
//     var oproxy = new Proxy({} , {
//       get : function (pipeObject, fnName) {
//         if (fnName === 'get') {
//           return funcStack.reduce(function (val, fn) {
//             return fn(val);
//           },value);
//         }
//         console.log(fnName);
//         funcStack.push(window[fnName]);
//         return oproxy;
//       }
//     });

//     return oproxy;
//   }
// }());

// var double = n => n * 2;
// var pow    = n => n * n;
// var reverseInt = n => n.toString().split("").reverse().join("") | 0;

//  console.log(pipe(3).double.pow.reverseInt.get)



//     const dom = new Proxy({}, {
//   get(target, property) {
//     return function(attrs = {}, ...children) {
//       const el = document.createElement(property);
//       for (let prop of Object.keys(attrs)) {
//         el.setAttribute(prop, attrs[prop]);
//       }
//       for (let child of children) {
//         if (typeof child === 'string') {
//           child = document.createTextNode(child);
//         }
//         el.appendChild(child);
//       }
//       return el;
//     }
//   }
// });

// const el = dom.div({},
//   'Hello, my name is ',
//   dom.a({href: '//example.com'}, 'Mark'),
//   '. I like:',
//   dom.ul({},
//     dom.li({}, 'The web'),
//     dom.li({}, 'Food'),
//     dom.li({}, '…actually that\'s it')
//   )
// );

// document.body.appendChild(el);

var json= {id:"12345", test: {id:"11111",name:"1111"}};
var handler = {
    set: function(target, props, value, receiver){
        // var newId = "1111111111111";
        var newId = Math.random();
        target['id'] = newId;
        target[props] = value;
        return true;
    }
}
var newJson = new Proxy(json.test, handler);
newJson.name = "abc";
console.log(json);
</script>
</html>